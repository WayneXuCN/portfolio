---
/**
 * 根路径重定向页面
 * 
 * 说明：
 * - 主要重定向逻辑已移至 src/middleware.ts（官方推荐方式）
 * - 此页面作为 fallback，用于静态构建时生成 index.html
 * - 使用 Astro.redirect() 进行服务端重定向
 * 
 * 参考文档：
 * - Middleware Guide
 * - Internationalization (i18n) Routing
 */
import { getRelativeLocaleUrl } from 'astro:i18n';
import { defaultLocale } from '../lib/i18n';

// 获取默认语言的 URL
const redirectUrl = getRelativeLocaleUrl(defaultLocale);

// 静态构建时，生成带重定向的 HTML
// 服务端渲染时，由 middleware 处理重定向
---

<!doctype html>
<html lang={defaultLocale}>
  <head>
    <meta charset='UTF-8' />
    <!-- 静态构建 fallback：使用 meta refresh 重定向 -->
    <meta http-equiv='refresh' content={`0;url=${redirectUrl}`} />
    <link rel='canonical' href={redirectUrl} />
    <title>Redirecting...</title>
  </head>
  <body>
    <p>Redirecting to <a href={redirectUrl}>{redirectUrl}</a>...</p>
  </body>
</html>
